<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Home Works: hw_03/test/test_allocator.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Home Works
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_dd7d0bb577ca62d44c75acfc54d40f36.html">hw_03</a></li><li class="navelem"><a class="el" href="../../dir_f3e474dadb839334ad8c26365d642fdc.html">test</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">test_allocator.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>test allocator  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d4/ddd/container_8h_source.html">container.h</a>&quot;</code><br />
<code>#include &lt;limits&gt;</code><br />
<code>#include &lt;chrono&gt;</code><br />
<code>#include &lt;boost/test/unit_test.hpp&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for test_allocator.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/d7d/test__allocator_8cpp__incl.png" border="0" usemap="#hw__03_2test_2test__allocator_8cpp" alt=""/></div>
<map name="hw__03_2test_2test__allocator_8cpp" id="hw__03_2test_2test__allocator_8cpp">
<area shape="rect" id="node2" href="../../d4/ddd/container_8h.html" title="Container. " alt="" coords="274,80,360,107"/>
<area shape="rect" id="node3" href="../../da/da9/allocator_8h.html" title="Allocator. " alt="" coords="199,155,280,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a38b360a852dc66bf5f44c5e2af03f306"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dfb/test__allocator_8cpp.html#a38b360a852dc66bf5f44c5e2af03f306">REBIND</a></td></tr>
<tr class="separator:a38b360a852dc66bf5f44c5e2af03f306"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b2a3852db8bb19ab6909bac01859985"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dfb/test__allocator_8cpp.html#a6b2a3852db8bb19ab6909bac01859985">BOOST_TEST_MODULE</a>&#160;&#160;&#160;allocator_testing</td></tr>
<tr class="separator:a6b2a3852db8bb19ab6909bac01859985"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7157f8e228530f4b817d88964ff407f4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dfb/test__allocator_8cpp.html#a7157f8e228530f4b817d88964ff407f4">BOOST_AUTO_TEST_CASE</a> (allocator_test)</td></tr>
<tr class="memdesc:a7157f8e228530f4b817d88964ff407f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">allocator test  <a href="#a7157f8e228530f4b817d88964ff407f4">More...</a><br /></td></tr>
<tr class="separator:a7157f8e228530f4b817d88964ff407f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06851bb807c415485ecc9f7d26cb9aab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dfb/test__allocator_8cpp.html#a06851bb807c415485ecc9f7d26cb9aab">BOOST_AUTO_TEST_CASE</a> (allocator_speed)</td></tr>
<tr class="memdesc:a06851bb807c415485ecc9f7d26cb9aab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocator test in speed.  <a href="#a06851bb807c415485ecc9f7d26cb9aab">More...</a><br /></td></tr>
<tr class="separator:a06851bb807c415485ecc9f7d26cb9aab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a703bb00677e2f246236ff7b0e5c2cc95"><td class="memItemLeft" align="right" valign="top">const auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dfb/test__allocator_8cpp.html#a703bb00677e2f246236ff7b0e5c2cc95">number</a> = 100</td></tr>
<tr class="memdesc:a703bb00677e2f246236ff7b0e5c2cc95"><td class="mdescLeft">&#160;</td><td class="mdescRight">elements of test  <a href="#a703bb00677e2f246236ff7b0e5c2cc95">More...</a><br /></td></tr>
<tr class="separator:a703bb00677e2f246236ff7b0e5c2cc95"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>test allocator </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a6b2a3852db8bb19ab6909bac01859985"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b2a3852db8bb19ab6909bac01859985">&#9670;&nbsp;</a></span>BOOST_TEST_MODULE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BOOST_TEST_MODULE&#160;&#160;&#160;allocator_testing</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a38b360a852dc66bf5f44c5e2af03f306"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38b360a852dc66bf5f44c5e2af03f306">&#9670;&nbsp;</a></span>REBIND</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REBIND</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a7157f8e228530f4b817d88964ff407f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7157f8e228530f4b817d88964ff407f4">&#9670;&nbsp;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">allocator_test&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>allocator test </p>
<p>allocator must be allocate memory by request size, if allocator can't allocate memory, then std::bad_alloc will be throw if memory will be allocate, allocator will return pointer in memory poll, where object's can be construct. if allocator try to free memory and it can't free, then std::bad_alloc will be throw. Check allocator for memory leak, try to free memory and checking what ALLOCATOR::alloc_counter not changed. </p>
<p>Check allocator work, allocator must be allocate 1 block memory allocate array, then check each elements, then all free </p><div class="fragment"><div class="line">current_memory_allocate = <a class="code" href="../../d1/dc6/namespaceHW__03_1_1ALLOCATOR.html#a28be27359ffaa2f62aa541ddd5bac60e">ALLOCATOR::alloc_counter</a>; </div><div class="line"><span class="keywordflow">if</span> (1)</div><div class="line">{</div><div class="line">    ALLOCATOR::allocator&lt;int, number&gt; data;</div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> *ptr[<a class="code" href="../../d7/dfb/test__allocator_8cpp.html#a703bb00677e2f246236ff7b0e5c2cc95">number</a>];</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; <a class="code" href="../../d7/dfb/test__allocator_8cpp.html#a703bb00677e2f246236ff7b0e5c2cc95">number</a>; ++i)</div><div class="line">    {</div><div class="line">        BOOST_REQUIRE_NO_THROW(ptr[i] = data.allocate(1));</div><div class="line">        BOOST_CHECK(ptr[i] != <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = number - 1; i &gt;= 0; --i)</div><div class="line">        BOOST_REQUIRE_NO_THROW(data.deallocate(ptr[i], 1));</div><div class="line"></div><div class="line">    BOOST_REQUIRE_NO_THROW(data.deallocate(ptr[0], 1));</div><div class="line">    BOOST_REQUIRE_NO_THROW(data.deallocate(ptr[12], 1));</div><div class="line"></div><div class="line">    BOOST_CHECK(current_memory_allocate + 1 == <a class="code" href="../../d1/dc6/namespaceHW__03_1_1ALLOCATOR.html#a28be27359ffaa2f62aa541ddd5bac60e">ALLOCATOR::alloc_counter</a>);</div><div class="line">}</div><div class="line">BOOST_CHECK(current_memory_allocate == <a class="code" href="../../d1/dc6/namespaceHW__03_1_1ALLOCATOR.html#a28be27359ffaa2f62aa541ddd5bac60e">ALLOCATOR::alloc_counter</a>);</div></div><!-- fragment --><p>Check allocator work, allocator must be allocate several block memory (extending allocator) allocate array, then check each elements, then all free </p><div class="fragment"><div class="line">current_memory_allocate = <a class="code" href="../../d1/dc6/namespaceHW__03_1_1ALLOCATOR.html#a28be27359ffaa2f62aa541ddd5bac60e">ALLOCATOR::alloc_counter</a>;</div><div class="line"><span class="keywordflow">if</span> (1)</div><div class="line">{</div><div class="line">    ALLOCATOR::allocator &lt; int, number / 10 &gt; data;</div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> *ptr[<a class="code" href="../../d7/dfb/test__allocator_8cpp.html#a703bb00677e2f246236ff7b0e5c2cc95">number</a>];</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; <a class="code" href="../../d7/dfb/test__allocator_8cpp.html#a703bb00677e2f246236ff7b0e5c2cc95">number</a>; ++i)</div><div class="line">    {</div><div class="line">        BOOST_REQUIRE_NO_THROW(ptr[i] = data.allocate(1));</div><div class="line">        BOOST_CHECK(ptr[i] != <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = number - 1; i &gt;= 0; --i)</div><div class="line">        BOOST_REQUIRE_NO_THROW(data.deallocate(ptr[i], 1));</div><div class="line"></div><div class="line">    BOOST_REQUIRE_NO_THROW(data.deallocate(ptr[0], 1));</div><div class="line">    BOOST_REQUIRE_NO_THROW(data.deallocate(ptr[12], 1));</div><div class="line"></div><div class="line">    BOOST_CHECK(current_memory_allocate + 1 &lt; <a class="code" href="../../d1/dc6/namespaceHW__03_1_1ALLOCATOR.html#a28be27359ffaa2f62aa541ddd5bac60e">ALLOCATOR::alloc_counter</a>);</div><div class="line">}</div><div class="line">BOOST_CHECK(current_memory_allocate == <a class="code" href="../../d1/dc6/namespaceHW__03_1_1ALLOCATOR.html#a28be27359ffaa2f62aa541ddd5bac60e">ALLOCATOR::alloc_counter</a>);</div></div><!-- fragment --><p>Check allocator work, allocator must be allocate 1 block memory Allocate element various size, check valid pointer, free memory </p><div class="fragment"><div class="line">current_memory_allocate = <a class="code" href="../../d1/dc6/namespaceHW__03_1_1ALLOCATOR.html#a28be27359ffaa2f62aa541ddd5bac60e">ALLOCATOR::alloc_counter</a>;</div><div class="line"><span class="keywordflow">if</span> (1)</div><div class="line">{</div><div class="line">    ALLOCATOR::allocator&lt;int, number&gt; data;</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; <a class="code" href="../../d7/dfb/test__allocator_8cpp.html#a703bb00677e2f246236ff7b0e5c2cc95">number</a>; ++i)</div><div class="line">    {</div><div class="line">        <span class="keywordtype">int</span> *ptr = <span class="keyword">nullptr</span>;</div><div class="line"></div><div class="line">        BOOST_REQUIRE_NO_THROW(ptr = data.allocate(i + 1));</div><div class="line">        BOOST_CHECK(ptr != <span class="keyword">nullptr</span>);</div><div class="line">        BOOST_REQUIRE_NO_THROW(data.deallocate(ptr, i + 1));</div><div class="line"></div><div class="line">        ptr = <span class="keyword">nullptr</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    BOOST_CHECK(current_memory_allocate + 1 == <a class="code" href="../../d1/dc6/namespaceHW__03_1_1ALLOCATOR.html#a28be27359ffaa2f62aa541ddd5bac60e">ALLOCATOR::alloc_counter</a>);</div><div class="line">}</div><div class="line">BOOST_CHECK(current_memory_allocate == <a class="code" href="../../d1/dc6/namespaceHW__03_1_1ALLOCATOR.html#a28be27359ffaa2f62aa541ddd5bac60e">ALLOCATOR::alloc_counter</a>);</div></div><!-- fragment --><p>Check allocator work, allocator must be allocate several block memory (extending allocator) Allocate element various size, check valid pointer, free memory </p><div class="fragment"><div class="line">current_memory_allocate = <a class="code" href="../../d1/dc6/namespaceHW__03_1_1ALLOCATOR.html#a28be27359ffaa2f62aa541ddd5bac60e">ALLOCATOR::alloc_counter</a>;</div><div class="line"><span class="keywordflow">if</span> (1)</div><div class="line">{</div><div class="line">    ALLOCATOR::allocator &lt; int, number / 10 &gt; data;</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; <a class="code" href="../../d7/dfb/test__allocator_8cpp.html#a703bb00677e2f246236ff7b0e5c2cc95">number</a>; ++i)</div><div class="line">    {</div><div class="line">        <span class="keywordtype">int</span> *ptr = <span class="keyword">nullptr</span>;</div><div class="line"></div><div class="line">        BOOST_REQUIRE_NO_THROW(ptr = data.allocate(i + 1));</div><div class="line">        BOOST_CHECK(ptr != <span class="keyword">nullptr</span>);</div><div class="line">        BOOST_REQUIRE_NO_THROW(data.deallocate(ptr, i + 1));</div><div class="line"></div><div class="line">        ptr = <span class="keyword">nullptr</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    BOOST_CHECK(current_memory_allocate + 1 == <a class="code" href="../../d1/dc6/namespaceHW__03_1_1ALLOCATOR.html#a28be27359ffaa2f62aa541ddd5bac60e">ALLOCATOR::alloc_counter</a>);</div><div class="line">}</div><div class="line"></div><div class="line">BOOST_CHECK(current_memory_allocate == <a class="code" href="../../d1/dc6/namespaceHW__03_1_1ALLOCATOR.html#a28be27359ffaa2f62aa541ddd5bac60e">ALLOCATOR::alloc_counter</a>);</div></div><!-- fragment --><div class="fragment"><div class="line">    Try to allocate invalid size of memory</div><div class="line">current_memory_allocate = <a class="code" href="../../d1/dc6/namespaceHW__03_1_1ALLOCATOR.html#a28be27359ffaa2f62aa541ddd5bac60e">ALLOCATOR::alloc_counter</a>;</div><div class="line"><span class="keywordflow">if</span> (1)</div><div class="line">{</div><div class="line">    ALLOCATOR::allocator &lt; int, number / 10 &gt; data;</div><div class="line"></div><div class="line">    BOOST_REQUIRE_THROW(data.allocate(0), std::bad_alloc);</div><div class="line"></div><div class="line">    BOOST_REQUIRE_THROW(data.allocate(std::numeric_limits&lt;uint64_t&gt;::max()), std::bad_alloc);</div><div class="line">    BOOST_REQUIRE_THROW(data.allocate(std::numeric_limits&lt;uint64_t&gt;::max() - 1), std::bad_alloc);</div><div class="line"></div><div class="line">    BOOST_REQUIRE_THROW(data.allocate(std::numeric_limits&lt;int&gt;::max()), std::bad_alloc);</div><div class="line">    BOOST_REQUIRE_THROW(data.allocate(std::numeric_limits&lt;int&gt;::max() - 1), std::bad_alloc);</div><div class="line"></div><div class="line">    BOOST_REQUIRE_THROW(data.allocate(std::numeric_limits&lt;int&gt;::max() / 2), std::bad_alloc);</div><div class="line">    BOOST_REQUIRE_THROW(data.allocate(std::numeric_limits&lt;int&gt;::max() / 2 + 1), std::bad_alloc);</div><div class="line">    BOOST_REQUIRE_THROW(data.allocate(std::numeric_limits&lt;int&gt;::max() / 2 - 1), std::bad_alloc);</div><div class="line"></div><div class="line">    BOOST_REQUIRE_THROW(data.allocate(-1), std::bad_alloc);</div><div class="line">    BOOST_REQUIRE_THROW(data.allocate(std::numeric_limits&lt;int&gt;::min()), std::bad_alloc);</div><div class="line">    BOOST_REQUIRE_THROW(data.allocate(std::numeric_limits&lt;long&gt;::min()), std::bad_alloc);</div><div class="line">}</div><div class="line"></div><div class="line">BOOST_CHECK(current_memory_allocate == <a class="code" href="../../d1/dc6/namespaceHW__03_1_1ALLOCATOR.html#a28be27359ffaa2f62aa541ddd5bac60e">ALLOCATOR::alloc_counter</a>);</div></div><!-- fragment --><p>Try to copy allocator, and checked leak memory is absent. allocator will not free memory, etc. must be done in destructor </p><div class="fragment"><div class="line">current_memory_allocate = <a class="code" href="../../d1/dc6/namespaceHW__03_1_1ALLOCATOR.html#a28be27359ffaa2f62aa541ddd5bac60e">ALLOCATOR::alloc_counter</a>;</div><div class="line"><span class="keywordflow">if</span> (1)</div><div class="line">{</div><div class="line">    ALLOCATOR::allocator &lt; int, number / 10 &gt; data;</div><div class="line"></div><div class="line">    ALLOCATOR::allocator &lt; int, number / 10 &gt; data_copy;</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; <a class="code" href="../../d7/dfb/test__allocator_8cpp.html#a703bb00677e2f246236ff7b0e5c2cc95">number</a>; ++i)</div><div class="line">        BOOST_REQUIRE_NO_THROW(data.allocate(1));</div><div class="line"></div><div class="line">    data_copy = data;</div><div class="line">}</div><div class="line">BOOST_CHECK(current_memory_allocate == <a class="code" href="../../d1/dc6/namespaceHW__03_1_1ALLOCATOR.html#a28be27359ffaa2f62aa541ddd5bac60e">ALLOCATOR::alloc_counter</a>);</div></div><!-- fragment --> 
</div>
</div>
<a id="a06851bb807c415485ecc9f7d26cb9aab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06851bb807c415485ecc9f7d26cb9aab">&#9670;&nbsp;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">allocator_speed&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocator test in speed. </p>
<dl class="section see"><dt>See also</dt><dd>ALLOCATOR::allocator</dd></dl>
<p>try to meassure speed std::allocator and ALLOCATOR::allocator </p>
<p>Allocate element various size, check valid pointer, free memory Speed test std::allocator </p><div class="fragment"><div class="line"><span class="keywordflow">if</span> (1)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> StartTime = std::chrono::high_resolution_clock::now();</div><div class="line">    std::allocator&lt;int&gt;             data;</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; <a class="code" href="../../d7/dfb/test__allocator_8cpp.html#a703bb00677e2f246236ff7b0e5c2cc95">number</a>; ++i)</div><div class="line">    {</div><div class="line">        <span class="keywordtype">int</span> *ptr = <span class="keyword">nullptr</span>;</div><div class="line"></div><div class="line">        BOOST_REQUIRE_NO_THROW(ptr = data.allocate(i));</div><div class="line">        BOOST_REQUIRE_NO_THROW(data.deallocate(ptr, i));</div><div class="line">    }</div><div class="line">    <span class="keyword">auto</span> FinishTime = std::chrono::high_resolution_clock::now();</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> time = FinishTime - StartTime;</div><div class="line">    time_result = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(time).count();</div><div class="line">}</div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;std::allocator new delete                          &quot;</span> &lt;&lt; time_result &lt;&lt; <span class="stringliteral">&quot; us&quot;</span> &lt;&lt; std::endl;</div></div><!-- fragment --><p>Allocate element various size, check valid pointer, free memory Speed test ALLOCATOR::allocator when allocator is extending </p><div class="fragment"><div class="line"><span class="keywordflow">if</span> (1)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> StartTime = std::chrono::high_resolution_clock::now();</div><div class="line">    ALLOCATOR::allocator &lt; int, number / 10 &gt;             data;</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; <a class="code" href="../../d7/dfb/test__allocator_8cpp.html#a703bb00677e2f246236ff7b0e5c2cc95">number</a>; ++i)</div><div class="line">    {</div><div class="line">        <span class="keywordtype">int</span> *ptr = <span class="keyword">nullptr</span>;</div><div class="line"></div><div class="line">        BOOST_REQUIRE_NO_THROW(ptr = data.allocate(i + 1));</div><div class="line">        BOOST_REQUIRE_NO_THROW(data.deallocate(ptr, i + 1));</div><div class="line">    }</div><div class="line">    <span class="keyword">auto</span> FinishTime = std::chrono::high_resolution_clock::now();</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> time = FinishTime - StartTime;</div><div class="line">    time_result = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(time).count();</div><div class="line">}</div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;ALLOCATOR::allocator new delete (extending)        &quot;</span> &lt;&lt; time_result &lt;&lt; <span class="stringliteral">&quot; us&quot;</span> &lt;&lt; std::endl;</div></div><!-- fragment --><p>Allocate element various size, check valid pointer, free memory Speed test ALLOCATOR::allocator when allocator is allocate const block size </p><div class="fragment"><div class="line"><span class="keywordflow">if</span> (1)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> StartTime = std::chrono::high_resolution_clock::now();</div><div class="line">    ALLOCATOR::allocator&lt;int, number&gt;             data;</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; <a class="code" href="../../d7/dfb/test__allocator_8cpp.html#a703bb00677e2f246236ff7b0e5c2cc95">number</a>; ++i)</div><div class="line">    {</div><div class="line">        <span class="keywordtype">int</span> *ptr = <span class="keyword">nullptr</span>;</div><div class="line"></div><div class="line">        BOOST_REQUIRE_NO_THROW(ptr = data.allocate(i + 1));</div><div class="line">        BOOST_REQUIRE_NO_THROW(data.deallocate(ptr, i + 1));</div><div class="line">    }</div><div class="line">    <span class="keyword">auto</span> FinishTime = std::chrono::high_resolution_clock::now();</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> time = FinishTime - StartTime;</div><div class="line">    time_result = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(time).count();</div><div class="line">}</div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;ALLOCATOR::allocator new delete (one allocate)     &quot;</span> &lt;&lt; time_result &lt;&lt; <span class="stringliteral">&quot; us&quot;</span> &lt;&lt; std::endl;</div></div><!-- fragment --><p>Allocate array, check all elements, when freeing Speed test std::allocator </p><div class="fragment"><div class="line"><span class="keywordflow">if</span> (1)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> StartTime = std::chrono::high_resolution_clock::now();</div><div class="line">    std::allocator&lt;int&gt; data;</div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> *ptr[<a class="code" href="../../d7/dfb/test__allocator_8cpp.html#a703bb00677e2f246236ff7b0e5c2cc95">number</a>];</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; <a class="code" href="../../d7/dfb/test__allocator_8cpp.html#a703bb00677e2f246236ff7b0e5c2cc95">number</a>; ++i)</div><div class="line">    {</div><div class="line">        BOOST_REQUIRE_NO_THROW(ptr[i] = data.allocate(1));</div><div class="line">        BOOST_CHECK(ptr[i] != <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = number - 1; i &gt;= 0; --i)</div><div class="line">        BOOST_REQUIRE_NO_THROW(data.deallocate(ptr[i], 1));</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> FinishTime = std::chrono::high_resolution_clock::now();</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> time = FinishTime - StartTime;</div><div class="line">    time_result = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(time).count();</div><div class="line">}</div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;std::allocator new[] delete[]                      &quot;</span> &lt;&lt; time_result &lt;&lt; <span class="stringliteral">&quot; us&quot;</span> &lt;&lt; std::endl;</div></div><!-- fragment --><p>Allocate array, check all elements, when freeing Speed test std::allocator when allocator is extending </p><div class="fragment"><div class="line"><span class="keywordflow">if</span> (1)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> StartTime = std::chrono::high_resolution_clock::now();</div><div class="line">    ALLOCATOR::allocator &lt; int, number / 10 &gt; data;</div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> *ptr[<a class="code" href="../../d7/dfb/test__allocator_8cpp.html#a703bb00677e2f246236ff7b0e5c2cc95">number</a>];</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; <a class="code" href="../../d7/dfb/test__allocator_8cpp.html#a703bb00677e2f246236ff7b0e5c2cc95">number</a>; ++i)</div><div class="line">    {</div><div class="line">        BOOST_REQUIRE_NO_THROW(ptr[i] = data.allocate(1));</div><div class="line">        BOOST_CHECK(ptr[i] != <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = number - 1; i &gt;= 0; --i)</div><div class="line">        BOOST_REQUIRE_NO_THROW(data.deallocate(ptr[i], 1));</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> FinishTime = std::chrono::high_resolution_clock::now();</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> time = FinishTime - StartTime;</div><div class="line">    time_result = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(time).count();</div><div class="line">}</div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;ALLOCATOR::allocator new[] delete[] (extending)    &quot;</span> &lt;&lt; time_result &lt;&lt; <span class="stringliteral">&quot; us&quot;</span> &lt;&lt; std::endl;</div></div><!-- fragment --><p>Allocate array, check all elements, when freeing Speed test std::allocator when allocator is allocate const size block </p><div class="fragment"><div class="line"><span class="keywordflow">if</span> (1)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> StartTime = std::chrono::high_resolution_clock::now();</div><div class="line">    ALLOCATOR::allocator&lt;int, number&gt; data;</div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> *ptr[<a class="code" href="../../d7/dfb/test__allocator_8cpp.html#a703bb00677e2f246236ff7b0e5c2cc95">number</a>];</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; <a class="code" href="../../d7/dfb/test__allocator_8cpp.html#a703bb00677e2f246236ff7b0e5c2cc95">number</a>; ++i)</div><div class="line">    {</div><div class="line">        BOOST_REQUIRE_NO_THROW(ptr[i] = data.allocate(1));</div><div class="line">        BOOST_CHECK(ptr[i] != <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = number - 1; i &gt;= 0; --i)</div><div class="line">        BOOST_REQUIRE_NO_THROW(data.deallocate(ptr[i], 1));</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> FinishTime = std::chrono::high_resolution_clock::now();</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> time = FinishTime - StartTime;</div><div class="line">    time_result = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(time).count();</div><div class="line">}</div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;ALLOCATOR::allocator new[] delete[] (one allocate) &quot;</span> &lt;&lt; time_result &lt;&lt; <span class="stringliteral">&quot; us&quot;</span> &lt;&lt; std::endl;</div></div><!-- fragment --> 
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a703bb00677e2f246236ff7b0e5c2cc95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a703bb00677e2f246236ff7b0e5c2cc95">&#9670;&nbsp;</a></span>number</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const auto number = 100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>elements of test </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
